<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>{{ 'Editar' if admin_user else 'Novo' }} Admin</title>
    <link rel="stylesheet" href="/static/css/admin.css">
</head>
<body>
    <div class="header"><div class="header-content"><h1>{{ '✏️ Editar' if admin_user else '➕ Novo' }} Administrador</h1></div></div>
    <div class="nav"><div class="nav-content"><a href="/admin/organizations">Organizações</a><a href="/admin/admins" class="active">Administradores</a></div></div>

    <div class="container"><div class="form-container">
        <form method="POST" action="{{ '/admin/admins/' + admin_user.admin_id + '/edit' if admin_user else '/admin/admins/new' }}">

            <div class="form-group">
                <label>Nome Completo *</label>
                <input type="text" name="full_name" value="{{ admin_user.full_name if admin_user else '' }}" required minlength="3">
            </div>

            <div class="form-group">
                <label>Email *</label>
                <input type="email" name="email" value="{{ admin_user.email if admin_user else '' }}" required>
            </div>

            <div class="form-group">
                <label>{{ 'Nova Senha (deixe em branco para manter)' if admin_user else 'Senha *' }}</label>
                <input type="password" name="{{ 'new_password' if admin_user else 'password' }}" {{ 'required' if not admin_user else '' }} minlength="8">
                <small>Mínimo 8 caracteres, com maiúscula, minúscula e número</small>
            </div>

            <div class="form-group">
                <label>Role *</label>
                <select name="role" required {{ 'disabled' if admin_user and admin_user.role == 'master' else '' }}>
                    <option value="org_admin" {{ 'selected' if admin_user and admin_user.role == 'org_admin' else '' }}>Org Admin</option>
                    <option value="master" {{ 'selected' if admin_user and admin_user.role == 'master' else '' }}>Master Admin</option>
                </select>
            </div>

            <div class="form-group">
                <label>Organização</label>
                <select name="org_id">
                    <option value="">Nenhuma (Master Admin)</option>
                    {% for org in organizations %}
                    <option value="{{ org.org_id }}" {{ 'selected' if admin_user and admin_user.org_id == org.org_id else '' }}>
                        {{ org.org_name }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            {% if admin_user %}
            <div class="form-group">
                <label>
                    <input type="checkbox" name="is_active" value="1" {{ 'checked' if admin_user.is_active else '' }}>
                    Conta Ativa
                </label>
            </div>
            {% endif %}

            <div class="form-actions">
                <a href="/admin/admins" class="btn btn-secondary">Cancelar</a>
                <button type="submit" class="btn btn-primary">{{ 'Salvar' if admin_user else 'Criar' }}</button>
            </div>
        </form>
    </div></div>
</body>
</html>
